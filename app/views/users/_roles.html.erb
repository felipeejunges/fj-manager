<%= turbo_frame_tag "users_roles" do %>
  <div class="row">
    <div class="col-12 table-responsive">
      <table class="table table-striped table-sm">
        <tbody>
          <% roles.each do |role| %>
            <tr>
              <td>
                <%= link_to role.name, role_path(role), data: { turbo: false } %>
              </td>
              <td>
                <%= form_tag(apply_role_user_path(@user.id), method: :patch) do |form| %>
                  <div class="form-check form-switch">
                    <%= text_field :role_id, "role_#{role.id} ", name: :role_id, value: role.id, class: "d-none"%>
                    <%= check_box_tag :allowed, :create, false, class: 'form-check-input', checked: @user.roles.where(id: role.id).present?, onchange: 'this.form.submit()' %>
                  </div>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% end %>
