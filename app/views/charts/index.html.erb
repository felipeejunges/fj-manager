<%= render "shared/menu" %>
<div class="col-sm p-3 min-vh-100">
  <%= render 'shared/notices' %>
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Graphs</h1>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12 offset-sm-0 col-md-4 offset-md-8">
      <%= form_tag('charts', method: :get) do |form| %>
        <div class="form-check">
          <div class="form-floating">
            <%= select_tag :type, options_for_select([['Quantity', 'quantity'], ['Money', 'money']], params[:type]), class: "form-select", onchange: 'this.form.submit()'%>
            <%= label_tag :type %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12 col-md-4">
      <%= pie_chart payment_day_by_client, title: 'Payment Day by Client' %>
    </div>
    <div class="col-sm-12 col-md-4">
      <%= pie_chart error_logs_by_payment_type, title: 'Error Log By Payment Type this Month'  %>
    </div>
    <div class="col-sm-12 col-md-4">
      <%= pie_chart payment_type_by_client, title: 'Payment Type by Client'  %>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12 col-md-6">
      <%= line_chart last_2_years_invoices_by_month, title: 'Invoced last 2 years by month ', xtitle: 'Month', ytitle:  %>
    </div>
    <div class="col-sm-12 col-md-6">
      <%= column_chart last_3_months_invoices_by_day, title: 'Invoices the last 3 months by day', xtitle: 'Day', ytitle: %>
    </div>
  </div>
</div>